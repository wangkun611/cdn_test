# CDN Test
本工具用于检查特定CDN边缘节点的内容是否一致。

使用方法：

    python cdn_test.py --ip 127.0.0.1 --cookies k=v samples.xlsx

## Excel文件格式(只支持xlsx格式)
1. 第一行：表头，跳过检查
2. 第一列：域名
3. 第二列：是否检查https
4. 第三列：需要检查的URL。如果为空，默认检查域名根目录
5. 第n列：需要检查的第n个URL

## 检查逻辑
1. 分别从本地CDN和测试节点请求同一个URL
2. 检查返回结果是否相同
    1. https模式：如果本地CDN节点不支持https，则跳过检查
    2. https模式：如果测试节点不支持https，则失败
    3. 如果返回状态码不一致，则失败
    4. 如果状态码是301、302，比较响应头中的Location字段，如果相同，则成功
    5. 如果状态码在200和299之间，比较响应内容
        1. 首先使用hash比较
        2. 如果hash不相同，使用SequenceMatcher比较文本，如果相似度小于0.8，则失败
    6. 其他状态码，则成功

## 检查结果文件说明
1. 根据不同的检查结果，会把第二列和后面的列涂上不同的背景色
2. 检查通过项：绿色
3. 跳过检查项：淡黄色
3. 检查失败项：红色
4. 跳过和失败的检查项会加上注释说明原因
